import type { ExerciseTemplate, ExerciseStep } from '@/src/types/exercise';
import { getSleepStoryAudioUrl } from './cdnConfig';

// Voice configuration presets for sleep stories (TTS fallback)
const VOICE_CONFIG = {
  intro: { rate: 0.6, pitch: 0.9 },
  story: { rate: 0.55, pitch: 0.88 },
  drift: { rate: 0.5, pitch: 0.85 },
};

/**
 * AUDIO TOGGLE
 * Set to true once you have:
 * 1. Generated audio files using scripts/generate-audio.ts
 * 2. Uploaded them to your CDN
 * 3. Updated CDN_BASE_URL in src/constants/cdnConfig.ts
 */
const USE_AUDIO = true;

/**
 * Transforms sleep story templates to use audio when enabled.
 * Wraps all TTS steps into a single audio_story step.
 */
function withAudioSupport(templates: ExerciseTemplate[]): ExerciseTemplate[] {
  if (!USE_AUDIO) {
    return templates;
  }

  return templates.map((template) => {
    // Only transform sleep stories (categories starting with 'sleep_')
    if (!template.category.startsWith('sleep_')) {
      return template;
    }

    const audioUrl = getSleepStoryAudioUrl(template.id);

    // Combine all speech segments for TTS fallback
    const allSegments = template.steps.flatMap((step) => step.speechSegments || []);

    const audioStep: ExerciseStep = {
      id: `${template.id}-audio`,
      type: 'audio_story',
      title: template.name,
      content: template.description,
      audioUrl,
      speechSegments: allSegments,
      voiceConfig: VOICE_CONFIG.story,
      required: true,
    };

    return {
      ...template,
      steps: [audioStep],
    };
  });
}

const RAW_SLEEP_STORY_TEMPLATES: ExerciseTemplate[] = [
  // ============================================
  // SLEEP_NATURE - Forest Path (FREE)
  // ============================================
  {
    id: 'sleep-forest-path',
    type: 'meditation',
    category: 'sleep_nature',
    name: 'Forest Path',
    description: 'Drift off on a peaceful walk through an ancient forest',
    duration: 15,
    icon: 'leaf-outline',
    color: '#059669',
    isPremium: false,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'Settling In',
        content: 'Find your comfortable position',
        speechSegments: [
          { text: 'Settle into your bed, finding the most comfortable position.', pauseAfter: 5 },
          { text: 'Close your eyes gently.', pauseAfter: 4 },
          { text: 'Take a slow, deep breath in.', pauseAfter: 5, breathCue: true },
          { text: 'And let it flow out naturally.', pauseAfter: 6, breathCue: true },
          { text: 'Tonight, we are going on a journey through an ancient forest.', pauseAfter: 5 },
          { text: 'There is nothing you need to do but listen and drift.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'The Forest Awakens',
        content: 'Entering the woods',
        speechSegments: [
          { text: 'Imagine yourself standing at the edge of a vast, ancient forest.', pauseAfter: 8 },
          { text: 'The trees tower above you, their leaves creating a soft green canopy.', pauseAfter: 10 },
          { text: 'Sunlight filters through in gentle, golden rays.', pauseAfter: 8 },
          { text: 'The air is cool and fresh. Each breath fills you with calm.', pauseAfter: 10 },
          { text: 'You step onto the soft path, covered in moss and fallen leaves.', pauseAfter: 8 },
          { text: 'With each step, you feel the day melting away.', pauseAfter: 12 },
          { text: 'The forest welcomes you.', pauseAfter: 15 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'Deeper Into the Woods',
        content: 'Walking the path',
        speechSegments: [
          { text: 'You continue walking, the path winding gently through the trees.', pauseAfter: 10 },
          { text: 'In the distance, you hear the soft trickle of a stream.', pauseAfter: 10 },
          { text: 'Birds sing their evening songs, soft and far away.', pauseAfter: 12 },
          { text: 'The forest floor is springy beneath your feet.', pauseAfter: 8 },
          { text: 'You notice a fallen log covered in soft, emerald moss.', pauseAfter: 8 },
          { text: 'It looks like the perfect place to rest.', pauseAfter: 10 },
          { text: 'You sit down, feeling completely at peace.', pauseAfter: 15 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-3',
        type: 'timed_speech',
        title: 'The Quiet Clearing',
        content: 'Finding peace',
        speechSegments: [
          { text: 'Ahead, you see a small clearing bathed in soft twilight.', pauseAfter: 10 },
          { text: 'You walk towards it, your footsteps silent on the mossy ground.', pauseAfter: 10 },
          { text: 'In the center of the clearing is a bed of soft ferns.', pauseAfter: 8 },
          { text: 'You lie down, the ferns cushioning you like a cloud.', pauseAfter: 10 },
          { text: 'Above you, the first stars begin to appear through the canopy.', pauseAfter: 12 },
          { text: 'The forest wraps around you, protective and warm.', pauseAfter: 15 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Drifting Away',
        content: 'Into peaceful sleep',
        speechSegments: [
          { text: 'The forest grows quieter now.', pauseAfter: 12 },
          { text: 'A warm, gentle breeze wraps around you like a blanket.', pauseAfter: 10 },
          { text: 'Your eyes grow heavy.', pauseAfter: 8 },
          { text: 'The sounds of the forest fade into a soft, distant hum.', pauseAfter: 12 },
          { text: 'You are safe here. Protected by the ancient trees.', pauseAfter: 15 },
          { text: 'Let yourself drift now.', pauseAfter: 12 },
          { text: 'Deeper and deeper into peaceful sleep.', pauseAfter: 20 },
          { text: 'Sleep well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_FANTASY - Cloud Float (FREE)
  // ============================================
  {
    id: 'sleep-cloud-float',
    type: 'meditation',
    category: 'sleep_fantasy',
    name: 'Cloud Float',
    description: 'Float away on a soft, dreamy cloud',
    duration: 12,
    icon: 'cloud-outline',
    color: '#8b5cf6',
    isPremium: false,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'Preparing to Float',
        content: 'Let go of the day',
        speechSegments: [
          { text: 'Make yourself comfortable and close your eyes.', pauseAfter: 5 },
          { text: 'Take a deep breath in, filling your lungs completely.', pauseAfter: 5, breathCue: true },
          { text: 'And slowly release it, letting go of any tension.', pauseAfter: 6, breathCue: true },
          { text: 'Tonight, you will float on a cloud, drifting through a peaceful sky.', pauseAfter: 6 },
          { text: 'Let your body become light.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'The Cloud Arrives',
        content: 'Your soft cloud',
        speechSegments: [
          { text: 'Imagine a soft, fluffy cloud descending from the sky.', pauseAfter: 8 },
          { text: 'It gently floats down to where you lie.', pauseAfter: 8 },
          { text: 'The cloud is softer than the softest pillow.', pauseAfter: 8 },
          { text: 'You step onto it, and it holds you perfectly.', pauseAfter: 10 },
          { text: 'The cloud begins to rise, slowly and gently.', pauseAfter: 10 },
          { text: 'You feel completely safe as you float upward.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'Floating in the Sky',
        content: 'Among the stars',
        speechSegments: [
          { text: 'You are now floating high above, among gentle wisps of cloud.', pauseAfter: 10 },
          { text: 'The evening sky stretches endlessly around you.', pauseAfter: 8 },
          { text: 'Soft shades of purple and pink paint the horizon.', pauseAfter: 10 },
          { text: 'Stars begin to appear, twinkling softly.', pauseAfter: 10 },
          { text: 'Each star sends down a gentle, warm light.', pauseAfter: 10 },
          { text: 'You feel weightless, peaceful, and completely relaxed.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Drifting to Sleep',
        content: 'Peaceful rest',
        speechSegments: [
          { text: 'Your cloud drifts slowly, carrying you through the peaceful night.', pauseAfter: 12 },
          { text: 'The gentle motion soothes you even more.', pauseAfter: 10 },
          { text: 'Your body feels so light, so relaxed.', pauseAfter: 10 },
          { text: 'The stars above seem to sing a silent lullaby.', pauseAfter: 12 },
          { text: 'You can let go now.', pauseAfter: 10 },
          { text: 'Float into dreams.', pauseAfter: 15 },
          { text: 'Sleep peacefully.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_COZY - Rainy Window (FREE)
  // ============================================
  {
    id: 'sleep-rainy-window',
    type: 'meditation',
    category: 'sleep_cozy',
    name: 'Rainy Window',
    description: 'Listen to rain as you drift to sleep in a cozy room',
    duration: 10,
    icon: 'water-outline',
    color: '#6366f1',
    isPremium: false,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'Getting Cozy',
        content: 'Settle in',
        speechSegments: [
          { text: 'Wrap yourself in your blankets and get comfortable.', pauseAfter: 5 },
          { text: 'Close your eyes and take a deep, relaxing breath.', pauseAfter: 5, breathCue: true },
          { text: 'Let your body sink into the bed.', pauseAfter: 6 },
          { text: 'Tonight, imagine you are in a cozy room on a rainy evening.', pauseAfter: 6 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'The Cozy Room',
        content: 'Your safe space',
        speechSegments: [
          { text: 'You are lying in a soft bed by a large window.', pauseAfter: 8 },
          { text: 'Outside, gentle rain begins to fall.', pauseAfter: 8 },
          { text: 'You can hear the soft patter of raindrops on the glass.', pauseAfter: 10 },
          { text: 'The room is warm and dimly lit by a soft lamp.', pauseAfter: 8 },
          { text: 'A thick, cozy blanket surrounds you completely.', pauseAfter: 10 },
          { text: 'This is your safe, peaceful space.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'The Rain Falls',
        content: 'Nature\'s lullaby',
        speechSegments: [
          { text: 'The rain continues to fall, steady and gentle.', pauseAfter: 10 },
          { text: 'Each drop creates a soft rhythm on the window.', pauseAfter: 10 },
          { text: 'You feel the coolness of the air from outside.', pauseAfter: 8 },
          { text: 'But inside, you are perfectly warm and safe.', pauseAfter: 10 },
          { text: 'The rain washes away all the thoughts of the day.', pauseAfter: 12 },
          { text: 'Only peace remains.', pauseAfter: 15 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Falling Asleep',
        content: 'Rest now',
        speechSegments: [
          { text: 'The rain continues its gentle song.', pauseAfter: 10 },
          { text: 'Your eyes are heavy now.', pauseAfter: 8 },
          { text: 'The warmth of the blanket feels so good.', pauseAfter: 10 },
          { text: 'Let the rain carry you to sleep.', pauseAfter: 12 },
          { text: 'You are safe. You are warm.', pauseAfter: 12 },
          { text: 'Sleep now.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_GUIDED - Body Release (FREE)
  // ============================================
  {
    id: 'sleep-body-release',
    type: 'meditation',
    category: 'sleep_guided',
    name: 'Body Release',
    description: 'Progressive relaxation to release tension and drift off',
    duration: 12,
    icon: 'body-outline',
    color: '#14b8a6',
    isPremium: false,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'Preparing to Relax',
        content: 'Begin your relaxation',
        speechSegments: [
          { text: 'Lie comfortably and let your body settle.', pauseAfter: 5 },
          { text: 'Close your eyes gently.', pauseAfter: 4 },
          { text: 'Take a slow, deep breath.', pauseAfter: 5, breathCue: true },
          { text: 'And release it completely.', pauseAfter: 6, breathCue: true },
          { text: 'We will now release all tension from your body, one area at a time.', pauseAfter: 6 },
          { text: 'There is nothing to do but relax.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'body-1',
        type: 'timed_speech',
        title: 'Head and Face',
        content: 'Releasing tension',
        speechSegments: [
          { text: 'Begin by noticing your forehead.', pauseAfter: 6 },
          { text: 'Allow any tension there to melt away.', pauseAfter: 8 },
          { text: 'Feel your eyebrows soften.', pauseAfter: 6 },
          { text: 'Let your eyes rest gently in their sockets.', pauseAfter: 8 },
          { text: 'Relax your jaw, letting your mouth fall slightly open.', pauseAfter: 8 },
          { text: 'Your entire face is soft and peaceful now.', pauseAfter: 10 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'body-2',
        type: 'timed_speech',
        title: 'Neck and Shoulders',
        content: 'Letting go',
        speechSegments: [
          { text: 'Move your attention to your neck.', pauseAfter: 6 },
          { text: 'Feel any tightness dissolve.', pauseAfter: 8 },
          { text: 'Your neck is soft and relaxed.', pauseAfter: 8 },
          { text: 'Now notice your shoulders.', pauseAfter: 6 },
          { text: 'Let them drop down, away from your ears.', pauseAfter: 8 },
          { text: 'Feel the weight release from your shoulders completely.', pauseAfter: 10 },
          { text: 'Heavy and relaxed.', pauseAfter: 10 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'body-3',
        type: 'timed_speech',
        title: 'Arms and Hands',
        content: 'Complete relaxation',
        speechSegments: [
          { text: 'The relaxation flows down into your arms.', pauseAfter: 8 },
          { text: 'Your upper arms become heavy and warm.', pauseAfter: 8 },
          { text: 'Your forearms relax completely.', pauseAfter: 8 },
          { text: 'Feel your hands soften.', pauseAfter: 6 },
          { text: 'Your fingers uncurl naturally.', pauseAfter: 8 },
          { text: 'Your arms are completely at rest.', pauseAfter: 10 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'body-4',
        type: 'timed_speech',
        title: 'Core and Legs',
        content: 'Deep release',
        speechSegments: [
          { text: 'Feel your chest and stomach relax with each breath.', pauseAfter: 8 },
          { text: 'Your back sinks deeper into the bed.', pauseAfter: 8 },
          { text: 'The relaxation continues down through your hips.', pauseAfter: 8 },
          { text: 'Your thighs become heavy and still.', pauseAfter: 8 },
          { text: 'Your calves relax.', pauseAfter: 6 },
          { text: 'Your feet become soft and warm.', pauseAfter: 8 },
          { text: 'Your entire body is completely relaxed.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Drifting Off',
        content: 'Into sleep',
        speechSegments: [
          { text: 'Your body is at total peace.', pauseAfter: 10 },
          { text: 'There is nothing to hold onto.', pauseAfter: 8 },
          { text: 'Nothing to think about.', pauseAfter: 8 },
          { text: 'Just this deep, beautiful relaxation.', pauseAfter: 10 },
          { text: 'Let yourself drift now.', pauseAfter: 12 },
          { text: 'Into peaceful sleep.', pauseAfter: 15 },
          { text: 'Rest well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_NATURE - Ocean Shore (PREMIUM)
  // ============================================
  {
    id: 'sleep-ocean-shore',
    type: 'meditation',
    category: 'sleep_nature',
    name: 'Ocean Shore',
    description: 'Fall asleep to the rhythm of gentle waves on a quiet beach',
    duration: 18,
    icon: 'water-outline',
    color: '#0ea5e9',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'Arriving at the Shore',
        content: 'Begin your journey',
        speechSegments: [
          { text: 'Close your eyes and let your body relax.', pauseAfter: 5 },
          { text: 'Take a slow, deep breath in.', pauseAfter: 5, breathCue: true },
          { text: 'And gently exhale.', pauseAfter: 6, breathCue: true },
          { text: 'Tonight, you are resting on a peaceful beach at twilight.', pauseAfter: 6 },
          { text: 'The ocean stretches endlessly before you.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'The Sandy Beach',
        content: 'Your resting place',
        speechSegments: [
          { text: 'You lie on soft, warm sand.', pauseAfter: 8 },
          { text: 'The sand has been warmed by the sun all day.', pauseAfter: 8 },
          { text: 'It cradles your body perfectly.', pauseAfter: 8 },
          { text: 'Above you, the sky is painted in soft oranges and purples.', pauseAfter: 10 },
          { text: 'A gentle breeze carries the fresh scent of the sea.', pauseAfter: 10 },
          { text: 'You feel completely at peace.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'The Rhythm of Waves',
        content: 'Nature\'s lullaby',
        speechSegments: [
          { text: 'Listen to the waves as they wash gently onto the shore.', pauseAfter: 10 },
          { text: 'In and out. In and out.', pauseAfter: 12 },
          { text: 'Each wave brings relaxation.', pauseAfter: 8 },
          { text: 'Each wave carries away any remaining tension.', pauseAfter: 10 },
          { text: 'The rhythm is ancient and eternal.', pauseAfter: 10 },
          { text: 'It has soothed countless souls before you.', pauseAfter: 12 },
          { text: 'Now it soothes you.', pauseAfter: 15 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-3',
        type: 'timed_speech',
        title: 'Twilight Descends',
        content: 'The peaceful evening',
        speechSegments: [
          { text: 'The sun has set now, leaving behind a soft glow on the horizon.', pauseAfter: 10 },
          { text: 'Stars begin to appear, one by one.', pauseAfter: 10 },
          { text: 'The waves continue their gentle rhythm.', pauseAfter: 10 },
          { text: 'The air is warm and salty.', pauseAfter: 8 },
          { text: 'You feel the sand beneath you, supporting you completely.', pauseAfter: 10 },
          { text: 'There is nowhere else to be. Nothing else to do.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Drifting with the Tide',
        content: 'Into peaceful sleep',
        speechSegments: [
          { text: 'The waves grow softer now, a distant whisper.', pauseAfter: 12 },
          { text: 'Your body feels as light as the sea foam.', pauseAfter: 10 },
          { text: 'The night wraps around you like a warm blanket.', pauseAfter: 10 },
          { text: 'Let the ocean carry your thoughts away.', pauseAfter: 12 },
          { text: 'Drift with the gentle tide.', pauseAfter: 12 },
          { text: 'Into deep, peaceful sleep.', pauseAfter: 15 },
          { text: 'Sleep well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_FANTASY - Starlit Voyage (PREMIUM)
  // ============================================
  {
    id: 'sleep-starlit-voyage',
    type: 'meditation',
    category: 'sleep_fantasy',
    name: 'Starlit Voyage',
    description: 'Journey through the cosmos on a magical starlit adventure',
    duration: 15,
    icon: 'star-outline',
    color: '#a855f7',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'Preparing for Launch',
        content: 'Begin your cosmic journey',
        speechSegments: [
          { text: 'Settle into a comfortable position and close your eyes.', pauseAfter: 5 },
          { text: 'Breathe deeply, letting go of the earth below.', pauseAfter: 6, breathCue: true },
          { text: 'Tonight, you will travel among the stars.', pauseAfter: 6 },
          { text: 'Feel your body becoming lighter.', pauseAfter: 6 },
          { text: 'Lighter and lighter still.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'Rising into the Night',
        content: 'Leaving earth behind',
        speechSegments: [
          { text: 'You begin to float gently upward.', pauseAfter: 8 },
          { text: 'The world below grows smaller and more peaceful.', pauseAfter: 10 },
          { text: 'Cities become tiny lights, then fade away.', pauseAfter: 10 },
          { text: 'You pass through soft clouds that caress you gently.', pauseAfter: 10 },
          { text: 'Above you, the infinite universe awaits.', pauseAfter: 12 },
          { text: 'You feel no fear. Only wonder.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'Among the Stars',
        content: 'The cosmic dance',
        speechSegments: [
          { text: 'You are now surrounded by stars.', pauseAfter: 8 },
          { text: 'Millions of them, each one a gentle light.', pauseAfter: 10 },
          { text: 'They twinkle and dance around you.', pauseAfter: 10 },
          { text: 'Some are warm gold, others cool blue.', pauseAfter: 8 },
          { text: 'A distant nebula glows with purple and pink light.', pauseAfter: 10 },
          { text: 'You drift slowly through this sea of stars.', pauseAfter: 12 },
          { text: 'Peaceful. Weightless. Free.', pauseAfter: 15 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-3',
        type: 'timed_speech',
        title: 'The Cosmic Cradle',
        content: 'Your resting place',
        speechSegments: [
          { text: 'You come to rest in a gentle cloud of stardust.', pauseAfter: 10 },
          { text: 'It glimmers softly, cradling you like a hammock.', pauseAfter: 10 },
          { text: 'The stars around you seem to pulse with a soothing rhythm.', pauseAfter: 10 },
          { text: 'Each pulse sends waves of relaxation through you.', pauseAfter: 10 },
          { text: 'You are part of the universe now.', pauseAfter: 10 },
          { text: 'Connected to everything. At peace with all.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Dreaming Among Stars',
        content: 'Into cosmic sleep',
        speechSegments: [
          { text: 'The stardust cradle rocks you gently.', pauseAfter: 12 },
          { text: 'Back and forth. Back and forth.', pauseAfter: 10 },
          { text: 'The stars sing a silent lullaby.', pauseAfter: 12 },
          { text: 'Your eyes are so heavy now.', pauseAfter: 10 },
          { text: 'Let the cosmos hold you.', pauseAfter: 12 },
          { text: 'Dream among the stars.', pauseAfter: 15 },
          { text: 'Sleep peacefully.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_COZY - Cabin Fireplace (PREMIUM)
  // ============================================
  {
    id: 'sleep-cabin-fireplace',
    type: 'meditation',
    category: 'sleep_cozy',
    name: 'Cabin Fireplace',
    description: 'Relax by a warm fire in a cozy mountain cabin',
    duration: 15,
    icon: 'flame-outline',
    color: '#f97316',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'Arriving at the Cabin',
        content: 'Your mountain retreat',
        speechSegments: [
          { text: 'Close your eyes and take a deep breath.', pauseAfter: 5 },
          { text: 'Let your body relax completely.', pauseAfter: 5 },
          { text: 'Tonight, you are in a cozy cabin in the mountains.', pauseAfter: 6 },
          { text: 'Outside, snow falls gently. Inside, a fire crackles warmly.', pauseAfter: 8 },
          { text: 'You are safe and warm.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'The Warm Cabin',
        content: 'Your cozy retreat',
        speechSegments: [
          { text: 'You sink into a large, comfortable armchair by the fireplace.', pauseAfter: 8 },
          { text: 'The chair is soft and perfectly molds to your body.', pauseAfter: 8 },
          { text: 'A thick wool blanket covers you from shoulders to toes.', pauseAfter: 10 },
          { text: 'The fire dances before you, casting gentle, warm light.', pauseAfter: 10 },
          { text: 'You can feel the heat on your face. So soothing.', pauseAfter: 10 },
          { text: 'The smell of burning wood fills the air.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'The Crackling Fire',
        content: 'Hypnotic flames',
        speechSegments: [
          { text: 'Watch the flames as they dance and flicker.', pauseAfter: 10 },
          { text: 'Orange. Yellow. Sometimes a flash of blue.', pauseAfter: 10 },
          { text: 'The wood crackles and pops softly.', pauseAfter: 10 },
          { text: 'Each sound deepens your relaxation.', pauseAfter: 8 },
          { text: 'The warmth wraps around you like an embrace.', pauseAfter: 10 },
          { text: 'Outside, the world is cold and quiet.', pauseAfter: 8 },
          { text: 'But here, you are perfectly warm.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-3',
        type: 'timed_speech',
        title: 'Snow Falls Gently',
        content: 'Peace outside',
        speechSegments: [
          { text: 'Through the window, you see snowflakes drifting down.', pauseAfter: 10 },
          { text: 'They fall slowly, silently, covering everything in white.', pauseAfter: 10 },
          { text: 'The world outside is still and peaceful.', pauseAfter: 10 },
          { text: 'Inside, the fire continues its gentle dance.', pauseAfter: 10 },
          { text: 'You feel your eyes growing heavy.', pauseAfter: 10 },
          { text: 'So warm. So comfortable. So safe.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Drifting to Sleep',
        content: 'By the warm fire',
        speechSegments: [
          { text: 'The fire crackles softly, like a lullaby.', pauseAfter: 12 },
          { text: 'Your body is completely relaxed.', pauseAfter: 10 },
          { text: 'The warmth holds you close.', pauseAfter: 10 },
          { text: 'Let yourself drift off now.', pauseAfter: 12 },
          { text: 'Into warm, peaceful dreams.', pauseAfter: 15 },
          { text: 'Sleep well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_TRAVEL - Train Journey (PREMIUM)
  // ============================================
  {
    id: 'sleep-train-journey',
    type: 'meditation',
    category: 'sleep_travel',
    name: 'Night Train',
    description: 'Fall asleep to the gentle rhythm of a train journey',
    duration: 15,
    icon: 'train-outline',
    color: '#64748b',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'Boarding the Train',
        content: 'Your sleeper car awaits',
        speechSegments: [
          { text: 'Close your eyes and relax.', pauseAfter: 5 },
          { text: 'Take a slow, deep breath.', pauseAfter: 5, breathCue: true },
          { text: 'Tonight, you are aboard a train, traveling through the night.', pauseAfter: 6 },
          { text: 'You have a cozy sleeper compartment all to yourself.', pauseAfter: 6 },
          { text: 'The journey ahead is long and peaceful.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'Your Sleeper Compartment',
        content: 'A cozy space',
        speechSegments: [
          { text: 'You lie in a comfortable bed with crisp white sheets.', pauseAfter: 8 },
          { text: 'A small lamp casts a warm, golden glow.', pauseAfter: 8 },
          { text: 'Through the window, the countryside passes slowly by.', pauseAfter: 10 },
          { text: 'The curtains sway gently with the motion of the train.', pauseAfter: 10 },
          { text: 'You feel the gentle rocking. Back and forth.', pauseAfter: 10 },
          { text: 'It is so soothing. So peaceful.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'The Rhythm of the Rails',
        content: 'A gentle lullaby',
        speechSegments: [
          { text: 'Listen to the rhythm of the wheels on the tracks.', pauseAfter: 10 },
          { text: 'Clickety-clack. Clickety-clack.', pauseAfter: 10 },
          { text: 'A steady, hypnotic rhythm.', pauseAfter: 8 },
          { text: 'The train rocks you gently side to side.', pauseAfter: 10 },
          { text: 'Like a cradle rocking a child.', pauseAfter: 10 },
          { text: 'You feel yourself relaxing more with each gentle sway.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-3',
        type: 'timed_speech',
        title: 'The Night Passes',
        content: 'Journey through darkness',
        speechSegments: [
          { text: 'Outside, the night is deep and quiet.', pauseAfter: 10 },
          { text: 'Occasionally, a distant light flickers past.', pauseAfter: 10 },
          { text: 'Small towns sleeping. Fields resting under starlight.', pauseAfter: 10 },
          { text: 'The train carries you onward, safe and warm.', pauseAfter: 10 },
          { text: 'You have nowhere to be. Nothing to do.', pauseAfter: 10 },
          { text: 'Just this peaceful journey through the night.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Falling Asleep',
        content: 'The train carries you to dreams',
        speechSegments: [
          { text: 'The rhythm of the rails grows softer.', pauseAfter: 12 },
          { text: 'Clickety-clack. Clickety-clack.', pauseAfter: 10 },
          { text: 'Your eyes are so heavy now.', pauseAfter: 10 },
          { text: 'The gentle rocking soothes you completely.', pauseAfter: 12 },
          { text: 'Let the train carry you to your dreams.', pauseAfter: 12 },
          { text: 'Sleep peacefully.', pauseAfter: 15 },
          { text: 'Rest well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_NATURE - Mountain Meadow (PREMIUM)
  // ============================================
  {
    id: 'sleep-mountain-meadow',
    type: 'meditation',
    category: 'sleep_nature',
    name: 'Mountain Meadow',
    description: 'Rest in a peaceful alpine meadow under the stars',
    duration: 18,
    icon: 'flower-outline',
    color: '#22c55e',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'Arriving at the Meadow',
        content: 'Your mountain sanctuary',
        speechSegments: [
          { text: 'Close your eyes and let your body relax.', pauseAfter: 5 },
          { text: 'Take a slow, deep breath of fresh mountain air.', pauseAfter: 6, breathCue: true },
          { text: 'Tonight, you find yourself in a beautiful alpine meadow.', pauseAfter: 6 },
          { text: 'High in the mountains, far from everything.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'The Soft Grass',
        content: 'Your natural bed',
        speechSegments: [
          { text: 'You lie in a bed of soft, fragrant grass.', pauseAfter: 8 },
          { text: 'Wildflowers dot the meadow in gentle colors.', pauseAfter: 8 },
          { text: 'Purple lavender. Yellow buttercups. White daisies.', pauseAfter: 10 },
          { text: 'Their sweet scent fills the air.', pauseAfter: 8 },
          { text: 'The grass cradles your body perfectly.', pauseAfter: 10 },
          { text: 'You feel connected to the earth beneath you.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'Mountain Peaks',
        content: 'Majestic guardians',
        speechSegments: [
          { text: 'All around you, mountain peaks rise into the sky.', pauseAfter: 10 },
          { text: 'Their snow-capped summits glow in the fading light.', pauseAfter: 10 },
          { text: 'They stand like ancient guardians, watching over you.', pauseAfter: 10 },
          { text: 'A gentle breeze carries the coolness of the peaks.', pauseAfter: 10 },
          { text: 'You feel protected here. Safe in nature\'s embrace.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-3',
        type: 'timed_speech',
        title: 'Stars Emerge',
        content: 'The night sky',
        speechSegments: [
          { text: 'The sky deepens to a rich, velvety blue.', pauseAfter: 10 },
          { text: 'Stars begin to appear, one by one.', pauseAfter: 10 },
          { text: 'Then dozens. Then hundreds.', pauseAfter: 8 },
          { text: 'The Milky Way stretches across the sky like a river of light.', pauseAfter: 12 },
          { text: 'You have never seen so many stars.', pauseAfter: 10 },
          { text: 'Each one seems to twinkle just for you.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Peaceful Rest',
        content: 'Into dreams',
        speechSegments: [
          { text: 'The meadow grows quiet and still.', pauseAfter: 12 },
          { text: 'A warm blanket of peace settles over you.', pauseAfter: 10 },
          { text: 'The stars continue their silent dance above.', pauseAfter: 12 },
          { text: 'Let the mountains watch over you tonight.', pauseAfter: 12 },
          { text: 'Drift into peaceful sleep.', pauseAfter: 15 },
          { text: 'Rest well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_NATURE - Bamboo Garden (PREMIUM)
  // ============================================
  {
    id: 'sleep-bamboo-garden',
    type: 'meditation',
    category: 'sleep_nature',
    name: 'Bamboo Garden',
    description: 'Find serenity in a peaceful Japanese bamboo grove',
    duration: 15,
    icon: 'leaf-outline',
    color: '#84cc16',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'Entering the Garden',
        content: 'A place of peace',
        speechSegments: [
          { text: 'Settle into a comfortable position.', pauseAfter: 5 },
          { text: 'Close your eyes and breathe slowly.', pauseAfter: 5, breathCue: true },
          { text: 'Tonight, you will rest in a serene bamboo garden.', pauseAfter: 6 },
          { text: 'A place of deep peace and tranquility.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'The Bamboo Grove',
        content: 'Tall and serene',
        speechSegments: [
          { text: 'You lie on a soft mat in a grove of tall bamboo.', pauseAfter: 8 },
          { text: 'The bamboo stalks reach high into the sky.', pauseAfter: 8 },
          { text: 'They are slender and elegant, swaying gently.', pauseAfter: 10 },
          { text: 'The leaves rustle softly overhead.', pauseAfter: 10 },
          { text: 'Sunlight filters through, creating patterns of light and shadow.', pauseAfter: 10 },
          { text: 'The air is fresh and carries a hint of green.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'The Water Feature',
        content: 'Gentle sounds',
        speechSegments: [
          { text: 'Nearby, you hear the gentle sound of water.', pauseAfter: 10 },
          { text: 'A small bamboo fountain tips and spills.', pauseAfter: 10 },
          { text: 'The water creates a soft, rhythmic melody.', pauseAfter: 10 },
          { text: 'Tip. Pour. Splash. Tip. Pour. Splash.', pauseAfter: 12 },
          { text: 'The rhythm is ancient and soothing.', pauseAfter: 10 },
          { text: 'Each sound washes away a little more tension.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-3',
        type: 'timed_speech',
        title: 'Evening Falls',
        content: 'Peaceful twilight',
        speechSegments: [
          { text: 'The light grows softer as evening approaches.', pauseAfter: 10 },
          { text: 'The bamboo becomes silhouettes against the pink sky.', pauseAfter: 10 },
          { text: 'Stone lanterns begin to glow with soft light.', pauseAfter: 10 },
          { text: 'The garden is perfectly peaceful.', pauseAfter: 10 },
          { text: 'You feel completely at ease.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Serene Sleep',
        content: 'Rest in peace',
        speechSegments: [
          { text: 'The garden grows still and quiet.', pauseAfter: 12 },
          { text: 'Only the gentle sound of water remains.', pauseAfter: 10 },
          { text: 'Let it lull you into peaceful sleep.', pauseAfter: 12 },
          { text: 'The bamboo watches over you.', pauseAfter: 12 },
          { text: 'Sleep now.', pauseAfter: 15 },
          { text: 'Rest well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_NATURE - Autumn Forest (PREMIUM)
  // ============================================
  {
    id: 'sleep-autumn-forest',
    type: 'meditation',
    category: 'sleep_nature',
    name: 'Autumn Forest',
    description: 'Walk through a golden autumn forest as leaves fall gently',
    duration: 15,
    icon: 'leaf-outline',
    color: '#ea580c',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'The Golden Path',
        content: 'Enter the autumn woods',
        speechSegments: [
          { text: 'Close your eyes and relax your body.', pauseAfter: 5 },
          { text: 'Take a deep breath of crisp autumn air.', pauseAfter: 5, breathCue: true },
          { text: 'Tonight, you walk through a forest painted in gold and red.', pauseAfter: 6 },
          { text: 'The most beautiful time of year.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'Colors of Autumn',
        content: 'Nature\'s palette',
        speechSegments: [
          { text: 'The trees around you blaze with color.', pauseAfter: 8 },
          { text: 'Deep reds. Bright oranges. Warm yellows.', pauseAfter: 10 },
          { text: 'The late afternoon sun makes them glow like fire.', pauseAfter: 10 },
          { text: 'Leaves drift down around you like confetti.', pauseAfter: 10 },
          { text: 'They land silently on the soft forest floor.', pauseAfter: 10 },
          { text: 'Your feet crunch gently on the leaf-covered path.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'A Cozy Spot',
        content: 'Your resting place',
        speechSegments: [
          { text: 'You find a perfect spot beneath an old oak tree.', pauseAfter: 10 },
          { text: 'A thick carpet of leaves cushions you.', pauseAfter: 10 },
          { text: 'They are dry and warm from the sun.', pauseAfter: 8 },
          { text: 'You lean back against the sturdy trunk.', pauseAfter: 10 },
          { text: 'The tree has stood here for a hundred years.', pauseAfter: 10 },
          { text: 'It feels like resting with an old friend.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-3',
        type: 'timed_speech',
        title: 'Twilight in the Woods',
        content: 'The day fades',
        speechSegments: [
          { text: 'The sun sinks lower, casting long shadows.', pauseAfter: 10 },
          { text: 'The colors deepen to rich ambers and burgundies.', pauseAfter: 10 },
          { text: 'The air grows cooler, but you feel perfectly warm.', pauseAfter: 10 },
          { text: 'A gentle breeze sends more leaves floating down.', pauseAfter: 10 },
          { text: 'The forest is quiet and peaceful.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Drifting with the Leaves',
        content: 'Into peaceful rest',
        speechSegments: [
          { text: 'Your eyes grow heavy.', pauseAfter: 10 },
          { text: 'The leaves continue their gentle dance around you.', pauseAfter: 10 },
          { text: 'Each one seems to carry away a worry.', pauseAfter: 12 },
          { text: 'Let yourself drift now.', pauseAfter: 12 },
          { text: 'Like a leaf floating gently to the ground.', pauseAfter: 15 },
          { text: 'Sleep well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_NATURE - Quiet Lake (PREMIUM)
  // ============================================
  {
    id: 'sleep-quiet-lake',
    type: 'meditation',
    category: 'sleep_nature',
    name: 'Quiet Lake',
    description: 'Rest by a peaceful lake as the evening settles in',
    duration: 18,
    icon: 'water-outline',
    color: '#0891b2',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'Arriving at the Lake',
        content: 'A tranquil setting',
        speechSegments: [
          { text: 'Make yourself comfortable and close your eyes.', pauseAfter: 5 },
          { text: 'Breathe deeply and let tension melt away.', pauseAfter: 6, breathCue: true },
          { text: 'Tonight, you rest beside a quiet mountain lake.', pauseAfter: 6 },
          { text: 'The water is perfectly still. Like glass.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'The Still Water',
        content: 'Perfect reflection',
        speechSegments: [
          { text: 'You sit on a smooth rock at the water\'s edge.', pauseAfter: 8 },
          { text: 'The lake stretches before you, calm and peaceful.', pauseAfter: 10 },
          { text: 'It reflects the sky like a perfect mirror.', pauseAfter: 10 },
          { text: 'Mountains and clouds float on its surface.', pauseAfter: 10 },
          { text: 'The water is so still you can barely tell where the lake ends and the sky begins.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'Evening Colors',
        content: 'The sky transforms',
        speechSegments: [
          { text: 'The sun begins to set behind the mountains.', pauseAfter: 10 },
          { text: 'The sky transforms into shades of pink and orange.', pauseAfter: 10 },
          { text: 'The lake captures these colors perfectly.', pauseAfter: 10 },
          { text: 'You are surrounded by beauty above and below.', pauseAfter: 10 },
          { text: 'The air is fresh and clean.', pauseAfter: 8 },
          { text: 'Each breath fills you with peace.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-3',
        type: 'timed_speech',
        title: 'Night Falls',
        content: 'Stars on the water',
        speechSegments: [
          { text: 'Darkness creeps gently across the lake.', pauseAfter: 10 },
          { text: 'Stars begin to appear in the sky above.', pauseAfter: 10 },
          { text: 'And then in the water below.', pauseAfter: 10 },
          { text: 'Two skies of stars, stretching endlessly.', pauseAfter: 12 },
          { text: 'The only sound is the occasional gentle lap of water.', pauseAfter: 12 },
          { text: 'So peaceful. So quiet.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Floating Away',
        content: 'Into sleep',
        speechSegments: [
          { text: 'The lake grows completely still.', pauseAfter: 12 },
          { text: 'You feel yourself becoming just as calm.', pauseAfter: 10 },
          { text: 'As peaceful as the water.', pauseAfter: 10 },
          { text: 'Let the stillness carry you to sleep.', pauseAfter: 12 },
          { text: 'Drift away peacefully.', pauseAfter: 15 },
          { text: 'Rest well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_FANTASY - Magical Garden (PREMIUM)
  // ============================================
  {
    id: 'sleep-magical-garden',
    type: 'meditation',
    category: 'sleep_fantasy',
    name: 'Magical Garden',
    description: 'Explore an enchanted garden filled with wonder',
    duration: 18,
    icon: 'flower-outline',
    color: '#ec4899',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'The Garden Gate',
        content: 'A magical entrance',
        speechSegments: [
          { text: 'Close your eyes and let your imagination open.', pauseAfter: 5 },
          { text: 'Take a deep, relaxing breath.', pauseAfter: 5, breathCue: true },
          { text: 'Tonight, you discover a secret garden.', pauseAfter: 6 },
          { text: 'A place where magic is real.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'Entering the Garden',
        content: 'Wonder awaits',
        speechSegments: [
          { text: 'You push open an old wooden gate.', pauseAfter: 8 },
          { text: 'Before you lies a garden unlike any other.', pauseAfter: 10 },
          { text: 'Flowers of every color bloom in abundance.', pauseAfter: 10 },
          { text: 'Some glow softly with their own inner light.', pauseAfter: 10 },
          { text: 'Butterflies with wings like stained glass flutter past.', pauseAfter: 10 },
          { text: 'The air smells of honey and roses.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'The Glowing Path',
        content: 'Following the light',
        speechSegments: [
          { text: 'A path of smooth stones leads deeper into the garden.', pauseAfter: 10 },
          { text: 'Each stone glows softly as you step on it.', pauseAfter: 10 },
          { text: 'Tiny lights like fireflies dance around you.', pauseAfter: 10 },
          { text: 'They seem to welcome you, guiding you forward.', pauseAfter: 10 },
          { text: 'You feel completely safe in this magical place.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-3',
        type: 'timed_speech',
        title: 'The Crystal Pond',
        content: 'A place of peace',
        speechSegments: [
          { text: 'You come to a pond of crystal clear water.', pauseAfter: 10 },
          { text: 'Lotus flowers float on its surface, glowing softly.', pauseAfter: 10 },
          { text: 'A weeping willow bends gracefully over the water.', pauseAfter: 10 },
          { text: 'Beneath it is a bed of the softest moss.', pauseAfter: 10 },
          { text: 'You lie down, feeling the gentle cushion beneath you.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-4',
        type: 'timed_speech',
        title: 'The Garden Sings',
        content: 'A gentle lullaby',
        speechSegments: [
          { text: 'The garden seems to sense your presence.', pauseAfter: 10 },
          { text: 'The flowers begin to hum a soft melody.', pauseAfter: 10 },
          { text: 'It is the most beautiful lullaby you have ever heard.', pauseAfter: 12 },
          { text: 'The fireflies dance in time with the music.', pauseAfter: 10 },
          { text: 'You feel completely at peace.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Magical Sleep',
        content: 'Dream in the garden',
        speechSegments: [
          { text: 'The lullaby grows softer and softer.', pauseAfter: 12 },
          { text: 'The lights dim to a gentle glow.', pauseAfter: 10 },
          { text: 'The garden watches over you with love.', pauseAfter: 12 },
          { text: 'Let yourself drift into magical dreams.', pauseAfter: 12 },
          { text: 'Sleep peacefully.', pauseAfter: 15 },
          { text: 'Rest well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_FANTASY - Moon Palace (PREMIUM)
  // ============================================
  {
    id: 'sleep-moon-palace',
    type: 'meditation',
    category: 'sleep_fantasy',
    name: 'Moon Palace',
    description: 'Visit a serene palace on the moon',
    duration: 15,
    icon: 'moon-outline',
    color: '#c4b5fd',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'Journey to the Moon',
        content: 'Rising through the night',
        speechSegments: [
          { text: 'Close your eyes and feel yourself becoming lighter.', pauseAfter: 5 },
          { text: 'Take a deep breath and let go of the earth.', pauseAfter: 6, breathCue: true },
          { text: 'Tonight, you will visit a peaceful palace on the moon.', pauseAfter: 6 },
          { text: 'Feel yourself rising gently into the night sky.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'Arriving at the Palace',
        content: 'A silvery wonder',
        speechSegments: [
          { text: 'You land softly on the surface of the moon.', pauseAfter: 10 },
          { text: 'Before you stands a beautiful palace made of silver and pearl.', pauseAfter: 10 },
          { text: 'It glows with a soft, ethereal light.', pauseAfter: 10 },
          { text: 'The doors open silently, welcoming you inside.', pauseAfter: 10 },
          { text: 'Everything here is peaceful and calm.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'The Hall of Starlight',
        content: 'Beauty everywhere',
        speechSegments: [
          { text: 'You walk through halls lined with crystals.', pauseAfter: 10 },
          { text: 'They capture starlight and cast rainbows everywhere.', pauseAfter: 10 },
          { text: 'Your footsteps make no sound on the silver floor.', pauseAfter: 10 },
          { text: 'Everything is quiet and serene.', pauseAfter: 10 },
          { text: 'You feel as if you are floating rather than walking.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-3',
        type: 'timed_speech',
        title: 'The Resting Chamber',
        content: 'Your lunar bed',
        speechSegments: [
          { text: 'You enter a chamber with a bed of moonbeams.', pauseAfter: 10 },
          { text: 'It looks like solid light, but it is soft as a cloud.', pauseAfter: 10 },
          { text: 'You lie down and feel completely weightless.', pauseAfter: 10 },
          { text: 'Through a great window, you see Earth below.', pauseAfter: 10 },
          { text: 'Beautiful and blue, peaceful from this distance.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Sleeping in Starlight',
        content: 'Peaceful lunar rest',
        speechSegments: [
          { text: 'The moon palace grows quiet.', pauseAfter: 12 },
          { text: 'Starlight softly fills the room.', pauseAfter: 10 },
          { text: 'You are weightless. Peaceful. Free.', pauseAfter: 12 },
          { text: 'Let the moon rock you gently to sleep.', pauseAfter: 12 },
          { text: 'Dream among the stars.', pauseAfter: 15 },
          { text: 'Rest well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_FANTASY - Underwater Kingdom (PREMIUM)
  // ============================================
  {
    id: 'sleep-underwater-kingdom',
    type: 'meditation',
    category: 'sleep_fantasy',
    name: 'Underwater Kingdom',
    description: 'Discover a peaceful underwater realm',
    duration: 18,
    icon: 'fish-outline',
    color: '#06b6d4',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'Diving Deep',
        content: 'Beneath the waves',
        speechSegments: [
          { text: 'Close your eyes and imagine you can breathe underwater.', pauseAfter: 6 },
          { text: 'Take a slow, deep breath.', pauseAfter: 5, breathCue: true },
          { text: 'Tonight, you will visit a peaceful kingdom beneath the sea.', pauseAfter: 6 },
          { text: 'Feel yourself sinking gently, gently down.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'The Sunlit Shallows',
        content: 'Beginning your descent',
        speechSegments: [
          { text: 'You float through warm, sunlit water.', pauseAfter: 10 },
          { text: 'Rays of light dance around you like ribbons.', pauseAfter: 10 },
          { text: 'Colorful fish swim past, curious and friendly.', pauseAfter: 10 },
          { text: 'Coral gardens bloom in brilliant colors.', pauseAfter: 10 },
          { text: 'You drift deeper, feeling completely at peace.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'The Coral Palace',
        content: 'An underwater wonder',
        speechSegments: [
          { text: 'Below you, a palace made of coral and pearl appears.', pauseAfter: 10 },
          { text: 'It glows with a soft, bioluminescent light.', pauseAfter: 10 },
          { text: 'Schools of tiny glowing fish swim around its towers.', pauseAfter: 10 },
          { text: 'The gates open as you approach.', pauseAfter: 10 },
          { text: 'You are welcomed into the peaceful kingdom.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-3',
        type: 'timed_speech',
        title: 'The Pearl Chamber',
        content: 'Your underwater haven',
        speechSegments: [
          { text: 'You float into a chamber lined with giant pearls.', pauseAfter: 10 },
          { text: 'They glow softly, casting a warm, gentle light.', pauseAfter: 10 },
          { text: 'In the center is a bed made of the softest kelp.', pauseAfter: 10 },
          { text: 'You lie down, feeling weightless and calm.', pauseAfter: 10 },
          { text: 'The water around you is perfectly still and warm.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Drifting in the Deep',
        content: 'Into peaceful dreams',
        speechSegments: [
          { text: 'The underwater kingdom grows quiet.', pauseAfter: 12 },
          { text: 'Gentle currents rock you slowly.', pauseAfter: 10 },
          { text: 'The soft glow of the pearls fades to dim.', pauseAfter: 12 },
          { text: 'Let the ocean hold you gently.', pauseAfter: 12 },
          { text: 'Drift into deep, peaceful sleep.', pauseAfter: 15 },
          { text: 'Rest well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_FANTASY - Dragon's Treasure (PREMIUM)
  // ============================================
  {
    id: 'sleep-dragons-treasure',
    type: 'meditation',
    category: 'sleep_fantasy',
    name: 'Dragon\'s Treasure',
    description: 'Rest on a gentle dragon\'s treasure of soft gold',
    duration: 15,
    icon: 'flame-outline',
    color: '#f59e0b',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'The Mountain Cave',
        content: 'A friendly dragon awaits',
        speechSegments: [
          { text: 'Close your eyes and let your imagination wander.', pauseAfter: 5 },
          { text: 'Breathe deeply and relax.', pauseAfter: 5, breathCue: true },
          { text: 'Tonight, you will meet a kind and gentle dragon.', pauseAfter: 6 },
          { text: 'Who offers you the most comfortable bed in all the land.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'Meeting the Dragon',
        content: 'A gentle giant',
        speechSegments: [
          { text: 'You enter a great cave in the mountainside.', pauseAfter: 10 },
          { text: 'Inside, you see a magnificent dragon.', pauseAfter: 10 },
          { text: 'Its scales shimmer like emeralds and sapphires.', pauseAfter: 10 },
          { text: 'The dragon\'s eyes are warm and kind.', pauseAfter: 10 },
          { text: 'It greets you with a low, gentle rumble.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'The Treasure Hoard',
        content: 'Gold and jewels',
        speechSegments: [
          { text: 'Behind the dragon lies a mountain of treasure.', pauseAfter: 10 },
          { text: 'Gold coins, smooth and warm from the dragon\'s presence.', pauseAfter: 10 },
          { text: 'The dragon invites you to rest upon it.', pauseAfter: 10 },
          { text: 'You sink into the coins like a bed of the softest sand.', pauseAfter: 10 },
          { text: 'The gold is warm, polished smooth by centuries.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-3',
        type: 'timed_speech',
        title: 'The Dragon\'s Lullaby',
        content: 'A protective guardian',
        speechSegments: [
          { text: 'The dragon curls its great body around the treasure.', pauseAfter: 10 },
          { text: 'Around you. Protecting you.', pauseAfter: 10 },
          { text: 'It begins to hum a deep, resonant lullaby.', pauseAfter: 10 },
          { text: 'The sound vibrates through you, calming every nerve.', pauseAfter: 12 },
          { text: 'You are safe here, guarded by an ancient friend.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Sleeping in Safety',
        content: 'Guarded dreams',
        speechSegments: [
          { text: 'The dragon\'s song grows softer.', pauseAfter: 12 },
          { text: 'The warm gold cradles you perfectly.', pauseAfter: 10 },
          { text: 'The dragon\'s gentle breath warms the air.', pauseAfter: 12 },
          { text: 'Sleep now, little one.', pauseAfter: 10 },
          { text: 'The dragon will watch over you.', pauseAfter: 15 },
          { text: 'Rest well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_COZY - Library Nook (PREMIUM)
  // ============================================
  {
    id: 'sleep-library-nook',
    type: 'meditation',
    category: 'sleep_cozy',
    name: 'Library Nook',
    description: 'Fall asleep in a cozy corner of an old library',
    duration: 15,
    icon: 'library-outline',
    color: '#78350f',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'The Old Library',
        content: 'Books and comfort',
        speechSegments: [
          { text: 'Close your eyes and relax.', pauseAfter: 5 },
          { text: 'Take a slow, deep breath.', pauseAfter: 5, breathCue: true },
          { text: 'Tonight, you rest in an old, beloved library.', pauseAfter: 6 },
          { text: 'Surrounded by thousands of stories.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'The Reading Nook',
        content: 'Your cozy corner',
        speechSegments: [
          { text: 'You have found the perfect spot.', pauseAfter: 8 },
          { text: 'A window seat nestled between tall bookshelves.', pauseAfter: 10 },
          { text: 'Thick cushions and soft blankets surround you.', pauseAfter: 10 },
          { text: 'The shelves reach up to the ceiling, filled with books.', pauseAfter: 10 },
          { text: 'Their spines create a tapestry of colors.', pauseAfter: 10 },
          { text: 'The smell of old paper and leather fills the air.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'Rain on the Window',
        content: 'The perfect evening',
        speechSegments: [
          { text: 'Outside, gentle rain begins to fall.', pauseAfter: 10 },
          { text: 'It taps softly against the window beside you.', pauseAfter: 10 },
          { text: 'A small lamp casts a warm, golden glow.', pauseAfter: 10 },
          { text: 'You are warm and dry while the world outside is gray.', pauseAfter: 10 },
          { text: 'This is the most comfortable you have ever felt.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-3',
        type: 'timed_speech',
        title: 'The Quiet Library',
        content: 'Peace surrounds you',
        speechSegments: [
          { text: 'The library is quiet now.', pauseAfter: 10 },
          { text: 'Only the soft sound of rain and distant clock ticking.', pauseAfter: 10 },
          { text: 'The books around you seem to whisper their stories.', pauseAfter: 10 },
          { text: 'But you don\'t need to listen. Just rest.', pauseAfter: 10 },
          { text: 'Let the peace of this place fill you.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Falling Asleep',
        content: 'Among the stories',
        speechSegments: [
          { text: 'Your eyes grow heavy.', pauseAfter: 10 },
          { text: 'The rain continues its gentle song.', pauseAfter: 10 },
          { text: 'The blankets hold you in their warmth.', pauseAfter: 12 },
          { text: 'Drift off among the stories.', pauseAfter: 12 },
          { text: 'Sleep peacefully.', pauseAfter: 15 },
          { text: 'Rest well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_COZY - Grandma's Quilt (PREMIUM)
  // ============================================
  {
    id: 'sleep-grandmas-quilt',
    type: 'meditation',
    category: 'sleep_cozy',
    name: 'Grandma\'s Quilt',
    description: 'Feel the comfort of a handmade quilt full of love',
    duration: 12,
    icon: 'heart-outline',
    color: '#be185d',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'The Old Farmhouse',
        content: 'Memories of comfort',
        speechSegments: [
          { text: 'Close your eyes and feel yourself relaxing.', pauseAfter: 5 },
          { text: 'Take a deep, comforting breath.', pauseAfter: 5, breathCue: true },
          { text: 'Tonight, you are wrapped in the coziest quilt ever made.', pauseAfter: 6 },
          { text: 'Made with love by someone who loves you.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'The Quilt',
        content: 'Patches of memories',
        speechSegments: [
          { text: 'The quilt is made of many different fabrics.', pauseAfter: 10 },
          { text: 'Each patch tells a story.', pauseAfter: 10 },
          { text: 'Soft flannel from an old shirt. Smooth cotton from a summer dress.', pauseAfter: 10 },
          { text: 'Every piece was chosen with care.', pauseAfter: 10 },
          { text: 'Every stitch was made with love.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'Warmth and Safety',
        content: 'Wrapped in love',
        speechSegments: [
          { text: 'The quilt is heavy and warm.', pauseAfter: 10 },
          { text: 'It wraps around you like a hug.', pauseAfter: 10 },
          { text: 'You feel completely safe. Completely loved.', pauseAfter: 10 },
          { text: 'The weight of the quilt calms your body.', pauseAfter: 10 },
          { text: 'Every muscle relaxes.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Drifting to Sleep',
        content: 'Safe and loved',
        speechSegments: [
          { text: 'The quilt holds you close.', pauseAfter: 12 },
          { text: 'You feel the love woven into every thread.', pauseAfter: 10 },
          { text: 'Let it carry you to peaceful dreams.', pauseAfter: 12 },
          { text: 'You are safe. You are loved.', pauseAfter: 12 },
          { text: 'Sleep well.', pauseAfter: 15 },
          { text: 'Rest peacefully.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_COZY - Snowy Afternoon (PREMIUM)
  // ============================================
  {
    id: 'sleep-snowy-afternoon',
    type: 'meditation',
    category: 'sleep_cozy',
    name: 'Snowy Afternoon',
    description: 'Nap while watching snow fall on a winter afternoon',
    duration: 12,
    icon: 'snow-outline',
    color: '#7dd3fc',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'A Winter Day',
        content: 'Snow is falling',
        speechSegments: [
          { text: 'Settle in and close your eyes.', pauseAfter: 5 },
          { text: 'Breathe slowly and deeply.', pauseAfter: 5, breathCue: true },
          { text: 'It is a peaceful winter afternoon.', pauseAfter: 6 },
          { text: 'Snow falls silently outside.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'The Warm Room',
        content: 'Your cozy sanctuary',
        speechSegments: [
          { text: 'You lie on a soft couch by a large window.', pauseAfter: 10 },
          { text: 'A thick blanket covers you completely.', pauseAfter: 10 },
          { text: 'The room is warm from the heating.', pauseAfter: 8 },
          { text: 'A cup of something warm steams on the table nearby.', pauseAfter: 10 },
          { text: 'Everything is peaceful and quiet.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'Watching the Snow',
        content: 'A winter wonderland',
        speechSegments: [
          { text: 'Through the window, you watch the snowflakes fall.', pauseAfter: 10 },
          { text: 'They drift down slowly, silently.', pauseAfter: 10 },
          { text: 'The world outside is turning white.', pauseAfter: 10 },
          { text: 'But inside, you are perfectly warm.', pauseAfter: 10 },
          { text: 'The contrast makes the warmth even sweeter.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Afternoon Nap',
        content: 'Drifting off',
        speechSegments: [
          { text: 'Your eyes grow heavy watching the snow.', pauseAfter: 12 },
          { text: 'The blanket is so warm and soft.', pauseAfter: 10 },
          { text: 'Let the snow carry your thoughts away.', pauseAfter: 12 },
          { text: 'Drift into a peaceful afternoon nap.', pauseAfter: 12 },
          { text: 'Sleep softly.', pauseAfter: 15 },
          { text: 'Rest well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_COZY - Treehouse Hideaway (PREMIUM)
  // ============================================
  {
    id: 'sleep-treehouse-hideaway',
    type: 'meditation',
    category: 'sleep_cozy',
    name: 'Treehouse Hideaway',
    description: 'Sleep in a magical treehouse high in the branches',
    duration: 15,
    icon: 'home-outline',
    color: '#65a30d',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'Climbing Up',
        content: 'Your secret place',
        speechSegments: [
          { text: 'Close your eyes and imagine a magical treehouse.', pauseAfter: 6 },
          { text: 'Take a deep, relaxing breath.', pauseAfter: 5, breathCue: true },
          { text: 'Tonight, this special place is yours.', pauseAfter: 6 },
          { text: 'High in the branches of a great old tree.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'The Treehouse',
        content: 'Your woodland home',
        speechSegments: [
          { text: 'The treehouse is snug and cozy.', pauseAfter: 10 },
          { text: 'Wooden walls covered with soft rugs.', pauseAfter: 10 },
          { text: 'Small windows look out into the leaves.', pauseAfter: 10 },
          { text: 'A soft bed takes up one corner.', pauseAfter: 10 },
          { text: 'String lights cast a warm, gentle glow.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'Among the Leaves',
        content: 'Nature surrounds you',
        speechSegments: [
          { text: 'The tree sways gently in the evening breeze.', pauseAfter: 10 },
          { text: 'Leaves rustle softly all around your hideaway.', pauseAfter: 10 },
          { text: 'Through the window, you see branches stretching out.', pauseAfter: 10 },
          { text: 'Birds settle into their nests nearby.', pauseAfter: 10 },
          { text: 'Everyone is getting ready to sleep.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-3',
        type: 'timed_speech',
        title: 'Night in the Tree',
        content: 'Safe in the branches',
        speechSegments: [
          { text: 'The sky darkens to deep blue through the windows.', pauseAfter: 10 },
          { text: 'You snuggle into the soft bed.', pauseAfter: 10 },
          { text: 'The tree creaks gently like a wooden ship.', pauseAfter: 10 },
          { text: 'It rocks you ever so slightly. So soothing.', pauseAfter: 12 },
          { text: 'You are safe here, cradled by the great tree.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Sleeping in the Tree',
        content: 'Into peaceful dreams',
        speechSegments: [
          { text: 'The leaves whisper a lullaby.', pauseAfter: 12 },
          { text: 'The tree sways gently, rocking you to sleep.', pauseAfter: 10 },
          { text: 'You are hidden away from all the world.', pauseAfter: 12 },
          { text: 'Safe in your secret treehouse.', pauseAfter: 12 },
          { text: 'Sleep peacefully.', pauseAfter: 15 },
          { text: 'Rest well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_TRAVEL - Boat on a River (PREMIUM)
  // ============================================
  {
    id: 'sleep-river-boat',
    type: 'meditation',
    category: 'sleep_travel',
    name: 'River Boat',
    description: 'Drift down a peaceful river on a small boat',
    duration: 15,
    icon: 'boat-outline',
    color: '#0284c7',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'On the River',
        content: 'Your gentle journey',
        speechSegments: [
          { text: 'Close your eyes and relax completely.', pauseAfter: 5 },
          { text: 'Take a slow, deep breath.', pauseAfter: 5, breathCue: true },
          { text: 'Tonight, you float gently down a peaceful river.', pauseAfter: 6 },
          { text: 'In a small wooden boat, drifting with the current.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'The Little Boat',
        content: 'Your floating bed',
        speechSegments: [
          { text: 'You lie in a small wooden boat with soft cushions.', pauseAfter: 10 },
          { text: 'The boat rocks gently with the current.', pauseAfter: 10 },
          { text: 'Side to side. Side to side.', pauseAfter: 10 },
          { text: 'The water laps softly against the hull.', pauseAfter: 10 },
          { text: 'It is the most soothing sound.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'Passing Scenery',
        content: 'Nature drifts by',
        speechSegments: [
          { text: 'Green banks pass slowly on either side.', pauseAfter: 10 },
          { text: 'Willow trees dip their branches into the water.', pauseAfter: 10 },
          { text: 'Dragonflies skim across the surface.', pauseAfter: 10 },
          { text: 'Everything moves at the speed of the river.', pauseAfter: 10 },
          { text: 'Slow. Peaceful. Unhurried.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-3',
        type: 'timed_speech',
        title: 'Evening on the Water',
        content: 'The day fades',
        speechSegments: [
          { text: 'The sun sets, painting the water gold.', pauseAfter: 10 },
          { text: 'The air grows cooler but you feel warm.', pauseAfter: 10 },
          { text: 'Fireflies begin to dance over the water.', pauseAfter: 10 },
          { text: 'Their lights reflect on the river like floating stars.', pauseAfter: 12 },
          { text: 'The boat continues its gentle journey.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Drifting to Sleep',
        content: 'On the gentle current',
        speechSegments: [
          { text: 'The river grows quieter.', pauseAfter: 12 },
          { text: 'The gentle rocking continues.', pauseAfter: 10 },
          { text: 'Side to side. Side to side.', pauseAfter: 12 },
          { text: 'Let the river carry you to dreams.', pauseAfter: 12 },
          { text: 'Sleep peacefully.', pauseAfter: 15 },
          { text: 'Rest well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_TRAVEL - Countryside Drive (PREMIUM)
  // ============================================
  {
    id: 'sleep-countryside-drive',
    type: 'meditation',
    category: 'sleep_travel',
    name: 'Countryside Drive',
    description: 'Fall asleep as a passenger on a peaceful country road',
    duration: 12,
    icon: 'car-outline',
    color: '#16a34a',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'On the Road',
        content: 'A peaceful drive',
        speechSegments: [
          { text: 'Close your eyes and relax.', pauseAfter: 5 },
          { text: 'Take a comfortable breath.', pauseAfter: 5, breathCue: true },
          { text: 'You are a passenger in a car, driving through the countryside.', pauseAfter: 6 },
          { text: 'Nothing to do but relax and watch the scenery.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'The Country Road',
        content: 'Rolling by',
        speechSegments: [
          { text: 'The car moves smoothly along a quiet country road.', pauseAfter: 10 },
          { text: 'Green fields stretch out on either side.', pauseAfter: 10 },
          { text: 'Occasional farmhouses dot the landscape.', pauseAfter: 10 },
          { text: 'Cows graze peacefully in the distance.', pauseAfter: 10 },
          { text: 'The world outside is calm and beautiful.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'The Gentle Motion',
        content: 'Soothing vibrations',
        speechSegments: [
          { text: 'The car hums quietly as it travels.', pauseAfter: 10 },
          { text: 'You feel the gentle vibration through your seat.', pauseAfter: 10 },
          { text: 'It is soothing and hypnotic.', pauseAfter: 10 },
          { text: 'The road unwinds endlessly ahead.', pauseAfter: 10 },
          { text: 'There is nowhere you need to be.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Drifting Off',
        content: 'Falling asleep in the car',
        speechSegments: [
          { text: 'Your head leans against the window.', pauseAfter: 12 },
          { text: 'The glass is cool against your cheek.', pauseAfter: 10 },
          { text: 'The motion of the car rocks you gently.', pauseAfter: 12 },
          { text: 'Your eyes grow heavy.', pauseAfter: 10 },
          { text: 'Let the journey carry you to sleep.', pauseAfter: 15 },
          { text: 'Rest well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_TRAVEL - Hot Air Balloon (PREMIUM)
  // ============================================
  {
    id: 'sleep-hot-air-balloon',
    type: 'meditation',
    category: 'sleep_travel',
    name: 'Hot Air Balloon',
    description: 'Float peacefully in a hot air balloon at sunset',
    duration: 15,
    icon: 'cloudy-outline',
    color: '#dc2626',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'Rising Up',
        content: 'Into the sky',
        speechSegments: [
          { text: 'Close your eyes and feel yourself becoming lighter.', pauseAfter: 5 },
          { text: 'Take a deep breath and relax.', pauseAfter: 5, breathCue: true },
          { text: 'Tonight, you float in a beautiful hot air balloon.', pauseAfter: 6 },
          { text: 'Rising gently into the evening sky.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'The Basket',
        content: 'Your floating sanctuary',
        speechSegments: [
          { text: 'You rest comfortably in the wicker basket.', pauseAfter: 10 },
          { text: 'Soft blankets and cushions surround you.', pauseAfter: 10 },
          { text: 'The balloon above is a beautiful rainbow of colors.', pauseAfter: 10 },
          { text: 'Red, orange, yellow, blue.', pauseAfter: 10 },
          { text: 'It lifts you higher, ever so gently.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'Above the World',
        content: 'A bird\'s eye view',
        speechSegments: [
          { text: 'Below you, the land spreads out like a patchwork quilt.', pauseAfter: 10 },
          { text: 'Fields of green and gold. Ribbons of rivers.', pauseAfter: 10 },
          { text: 'Tiny houses and winding roads.', pauseAfter: 10 },
          { text: 'Everything looks so peaceful from up here.', pauseAfter: 10 },
          { text: 'So small. So calm.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-3',
        type: 'timed_speech',
        title: 'Sunset Flight',
        content: 'Golden light',
        speechSegments: [
          { text: 'The sun begins to set, painting the sky.', pauseAfter: 10 },
          { text: 'You are floating in a sea of pink and gold.', pauseAfter: 10 },
          { text: 'The clouds below glow like cotton candy.', pauseAfter: 10 },
          { text: 'The balloon drifts silently through this beauty.', pauseAfter: 12 },
          { text: 'You feel completely at peace.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Floating to Sleep',
        content: 'Among the clouds',
        speechSegments: [
          { text: 'Stars begin to appear in the darkening sky.', pauseAfter: 12 },
          { text: 'The balloon floats serenely onward.', pauseAfter: 10 },
          { text: 'You feel as if you could float forever.', pauseAfter: 12 },
          { text: 'Let yourself drift into dreams.', pauseAfter: 12 },
          { text: 'Sleep peacefully.', pauseAfter: 15 },
          { text: 'Rest well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_TRAVEL - Sailing at Night (PREMIUM)
  // ============================================
  {
    id: 'sleep-night-sailing',
    type: 'meditation',
    category: 'sleep_travel',
    name: 'Night Sailing',
    description: 'Sail across a calm sea under a blanket of stars',
    duration: 18,
    icon: 'boat-outline',
    color: '#1e3a5f',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'Setting Sail',
        content: 'Into the night',
        speechSegments: [
          { text: 'Close your eyes and breathe deeply.', pauseAfter: 5 },
          { text: 'Let your body relax completely.', pauseAfter: 5, breathCue: true },
          { text: 'Tonight, you sail across a calm, dark sea.', pauseAfter: 6 },
          { text: 'Under a sky filled with stars.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'The Sailboat',
        content: 'Your vessel',
        speechSegments: [
          { text: 'You rest on the deck of a beautiful sailboat.', pauseAfter: 10 },
          { text: 'Soft cushions support your body.', pauseAfter: 10 },
          { text: 'The sails above billow gently in the breeze.', pauseAfter: 10 },
          { text: 'The boat glides smoothly across the water.', pauseAfter: 10 },
          { text: 'You hear the soft splash of waves against the hull.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'The Night Sea',
        content: 'Infinite calm',
        speechSegments: [
          { text: 'The sea stretches out endlessly in all directions.', pauseAfter: 10 },
          { text: 'It is calm and dark, like black silk.', pauseAfter: 10 },
          { text: 'Moonlight traces a silver path across the water.', pauseAfter: 10 },
          { text: 'The boat follows this path, gliding silently.', pauseAfter: 10 },
          { text: 'There is no rush. No destination.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-3',
        type: 'timed_speech',
        title: 'Stars Above',
        content: 'Celestial canopy',
        speechSegments: [
          { text: 'Above you, the sky is filled with stars.', pauseAfter: 10 },
          { text: 'More stars than you have ever seen.', pauseAfter: 10 },
          { text: 'The Milky Way arches overhead like a river of light.', pauseAfter: 12 },
          { text: 'Shooting stars streak across the darkness.', pauseAfter: 10 },
          { text: 'You feel connected to the infinite universe.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Rocked to Sleep',
        content: 'On gentle waves',
        speechSegments: [
          { text: 'The boat rocks gently on the calm sea.', pauseAfter: 12 },
          { text: 'Side to side. So soothing.', pauseAfter: 10 },
          { text: 'The waves whisper against the hull.', pauseAfter: 12 },
          { text: 'The stars watch over you.', pauseAfter: 10 },
          { text: 'Let the sea rock you to sleep.', pauseAfter: 15 },
          { text: 'Rest well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_GUIDED - Breath Journey (PREMIUM)
  // ============================================
  {
    id: 'sleep-breath-journey',
    type: 'meditation',
    category: 'sleep_guided',
    name: 'Breath Journey',
    description: 'Follow your breath into deep relaxation and sleep',
    duration: 15,
    icon: 'fitness-outline',
    color: '#0891b2',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'Finding Your Breath',
        content: 'Begin the journey',
        speechSegments: [
          { text: 'Make yourself comfortable and close your eyes.', pauseAfter: 5 },
          { text: 'Take a natural breath.', pauseAfter: 4 },
          { text: 'There is nothing to change about your breathing.', pauseAfter: 6 },
          { text: 'Just notice it. Follow it.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'breath-1',
        type: 'timed_speech',
        title: 'Noticing the In-Breath',
        content: 'The air enters',
        speechSegments: [
          { text: 'Notice when you breathe in.', pauseAfter: 8 },
          { text: 'Feel the air entering your nostrils.', pauseAfter: 8 },
          { text: 'Cool and fresh.', pauseAfter: 6 },
          { text: 'Follow it as it fills your lungs.', pauseAfter: 8 },
          { text: 'Feel your chest and belly gently expand.', pauseAfter: 10 },
          { text: 'This is where life enters you.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'breath-2',
        type: 'timed_speech',
        title: 'Noticing the Out-Breath',
        content: 'Release and let go',
        speechSegments: [
          { text: 'Now notice when you breathe out.', pauseAfter: 8 },
          { text: 'Feel your chest and belly soften.', pauseAfter: 8 },
          { text: 'The air leaves warm and used.', pauseAfter: 8 },
          { text: 'With each exhale, tension leaves your body.', pauseAfter: 10 },
          { text: 'You release a little more with each breath out.', pauseAfter: 10 },
          { text: 'Letting go. Letting go.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'breath-3',
        type: 'timed_speech',
        title: 'The Space Between',
        content: 'A moment of stillness',
        speechSegments: [
          { text: 'Notice the small pause between breaths.', pauseAfter: 10 },
          { text: 'After you exhale, before you inhale again.', pauseAfter: 10 },
          { text: 'A tiny moment of perfect stillness.', pauseAfter: 10 },
          { text: 'Let this stillness grow.', pauseAfter: 10 },
          { text: 'It is a place of deep peace.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'breath-4',
        type: 'timed_speech',
        title: 'Deeper and Slower',
        content: 'Natural relaxation',
        speechSegments: [
          { text: 'Your breathing may be slowing down now.', pauseAfter: 10 },
          { text: 'This is natural. Let it happen.', pauseAfter: 10 },
          { text: 'Each breath takes you deeper into relaxation.', pauseAfter: 10 },
          { text: 'You don\'t need to control anything.', pauseAfter: 10 },
          { text: 'Just follow the breath as it comes and goes.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Breathing Into Sleep',
        content: 'Gentle rest',
        speechSegments: [
          { text: 'Your breath is soft and slow now.', pauseAfter: 12 },
          { text: 'Like gentle waves on a calm shore.', pauseAfter: 10 },
          { text: 'Let your breath carry you to sleep.', pauseAfter: 12 },
          { text: 'There is nothing more to do.', pauseAfter: 10 },
          { text: 'Just breathe. And sleep.', pauseAfter: 15 },
          { text: 'Rest well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_GUIDED - Mind Quieting (PREMIUM)
  // ============================================
  {
    id: 'sleep-mind-quieting',
    type: 'meditation',
    category: 'sleep_guided',
    name: 'Mind Quieting',
    description: 'Gently release thoughts and quiet your mind for sleep',
    duration: 15,
    icon: 'cloudy-outline',
    color: '#6366f1',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'Settling In',
        content: 'Beginning to quiet',
        speechSegments: [
          { text: 'Close your eyes and let your body rest.', pauseAfter: 5 },
          { text: 'Take a slow, calming breath.', pauseAfter: 5, breathCue: true },
          { text: 'Tonight, we will gently quiet the mind.', pauseAfter: 6 },
          { text: 'There is no need to struggle with thoughts.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'mind-1',
        type: 'timed_speech',
        title: 'Clouds in the Sky',
        content: 'Observing thoughts',
        speechSegments: [
          { text: 'Imagine your mind is a vast, open sky.', pauseAfter: 10 },
          { text: 'Thoughts are like clouds passing through.', pauseAfter: 10 },
          { text: 'Some big, some small. Some dark, some light.', pauseAfter: 10 },
          { text: 'You don\'t need to hold onto any of them.', pauseAfter: 10 },
          { text: 'Just watch them drift by.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'mind-2',
        type: 'timed_speech',
        title: 'Letting Them Pass',
        content: 'Releasing attachment',
        speechSegments: [
          { text: 'When a thought comes, simply notice it.', pauseAfter: 10 },
          { text: 'You might say softly to yourself, "thinking."', pauseAfter: 10 },
          { text: 'And then let it go.', pauseAfter: 8 },
          { text: 'Watch it drift away like a cloud on the wind.', pauseAfter: 10 },
          { text: 'Return to the stillness of the sky.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'mind-3',
        type: 'timed_speech',
        title: 'The Sky Clears',
        content: 'Growing peace',
        speechSegments: [
          { text: 'As you let thoughts pass, the sky begins to clear.', pauseAfter: 10 },
          { text: 'There is more and more space between the clouds.', pauseAfter: 10 },
          { text: 'Vast, peaceful, open space.', pauseAfter: 10 },
          { text: 'This is your true mind. Calm and clear.', pauseAfter: 10 },
          { text: 'Rest in this openness.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Into Quiet Sleep',
        content: 'Peaceful rest',
        speechSegments: [
          { text: 'The sky of your mind is still now.', pauseAfter: 12 },
          { text: 'Thoughts have faded to whispers.', pauseAfter: 10 },
          { text: 'And even the whispers are fading.', pauseAfter: 12 },
          { text: 'Let yourself drift into this quiet.', pauseAfter: 12 },
          { text: 'Sleep peacefully.', pauseAfter: 15 },
          { text: 'Rest well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_GUIDED - Counting Down (PREMIUM)
  // ============================================
  {
    id: 'sleep-counting-down',
    type: 'meditation',
    category: 'sleep_guided',
    name: 'Counting Down',
    description: 'Count down from 100 into deep, peaceful sleep',
    duration: 20,
    icon: 'time-outline',
    color: '#7c3aed',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'Preparing to Count',
        content: 'A simple technique',
        speechSegments: [
          { text: 'Close your eyes and make yourself comfortable.', pauseAfter: 5 },
          { text: 'Take a slow, deep breath.', pauseAfter: 5, breathCue: true },
          { text: 'Tonight, we will count down into sleep.', pauseAfter: 6 },
          { text: 'A simple, ancient technique for peaceful rest.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'count-1',
        type: 'timed_speech',
        title: 'Beginning the Count',
        content: 'One hundred to eighty',
        speechSegments: [
          { text: 'One hundred.', pauseAfter: 4 },
          { text: 'Ninety-nine.', pauseAfter: 4 },
          { text: 'Feel yourself relaxing more with each number.', pauseAfter: 6 },
          { text: 'Ninety-eight.', pauseAfter: 4 },
          { text: 'Ninety-seven.', pauseAfter: 4 },
          { text: 'Ninety-six.', pauseAfter: 4 },
          { text: 'Each number takes you deeper.', pauseAfter: 6 },
          { text: 'Ninety-five.', pauseAfter: 4 },
          { text: 'Ninety-four.', pauseAfter: 4 },
          { text: 'Ninety-three.', pauseAfter: 4 },
          { text: 'Ninety-two.', pauseAfter: 4 },
          { text: 'Ninety-one.', pauseAfter: 4 },
          { text: 'Ninety.', pauseAfter: 6 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'count-2',
        type: 'timed_speech',
        title: 'Descending',
        content: 'Going deeper',
        speechSegments: [
          { text: 'Eighty-nine.', pauseAfter: 4 },
          { text: 'Eighty-eight.', pauseAfter: 4 },
          { text: 'Eighty-seven.', pauseAfter: 4 },
          { text: 'Your body grows heavier.', pauseAfter: 6 },
          { text: 'Eighty-six.', pauseAfter: 4 },
          { text: 'Eighty-five.', pauseAfter: 4 },
          { text: 'Eighty-four.', pauseAfter: 4 },
          { text: 'Eighty-three.', pauseAfter: 4 },
          { text: 'Eighty-two.', pauseAfter: 4 },
          { text: 'Deeper and deeper.', pauseAfter: 6 },
          { text: 'Eighty-one.', pauseAfter: 4 },
          { text: 'Eighty.', pauseAfter: 6 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'count-3',
        type: 'timed_speech',
        title: 'Deeper Still',
        content: 'Into relaxation',
        speechSegments: [
          { text: 'Seventy-nine.', pauseAfter: 5 },
          { text: 'Seventy-eight.', pauseAfter: 5 },
          { text: 'Seventy-seven.', pauseAfter: 5 },
          { text: 'So relaxed now.', pauseAfter: 6 },
          { text: 'Seventy-six.', pauseAfter: 5 },
          { text: 'Seventy-five.', pauseAfter: 5 },
          { text: 'Your eyes are so heavy.', pauseAfter: 6 },
          { text: 'Seventy-four.', pauseAfter: 5 },
          { text: 'Seventy-three.', pauseAfter: 5 },
          { text: 'Seventy-two.', pauseAfter: 5 },
          { text: 'Seventy-one.', pauseAfter: 5 },
          { text: 'Seventy.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'count-4',
        type: 'timed_speech',
        title: 'Approaching Sleep',
        content: 'Almost there',
        speechSegments: [
          { text: 'Sixty-nine.', pauseAfter: 6 },
          { text: 'Sixty-eight.', pauseAfter: 6 },
          { text: 'You may lose count. That\'s okay.', pauseAfter: 8 },
          { text: 'Sixty-seven.', pauseAfter: 6 },
          { text: 'Sixty-six.', pauseAfter: 6 },
          { text: 'Just keep drifting deeper.', pauseAfter: 8 },
          { text: 'Sixty-five.', pauseAfter: 6 },
          { text: 'Sixty-four.', pauseAfter: 6 },
          { text: 'Sixty-three.', pauseAfter: 6 },
          { text: 'Sixty-two.', pauseAfter: 6 },
          { text: 'Sixty-one.', pauseAfter: 6 },
          { text: 'Sixty.', pauseAfter: 10 },
        ],
        voiceConfig: { rate: 0.5, pitch: 0.87 },
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Drifting to Sleep',
        content: 'The count fades',
        speechSegments: [
          { text: 'Fifty-nine.', pauseAfter: 8 },
          { text: 'Fifty-eight.', pauseAfter: 8 },
          { text: 'The numbers are growing softer.', pauseAfter: 10 },
          { text: 'Fifty-seven.', pauseAfter: 10 },
          { text: 'Fifty-six.', pauseAfter: 10 },
          { text: 'You may not hear them all.', pauseAfter: 12 },
          { text: 'Fifty-five.', pauseAfter: 12 },
          { text: 'Sleep well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_GUIDED - Tension Melt (PREMIUM)
  // ============================================
  {
    id: 'sleep-tension-melt',
    type: 'meditation',
    category: 'sleep_guided',
    name: 'Tension Melt',
    description: 'Visualize tension melting away like warm butter',
    duration: 15,
    icon: 'sunny-outline',
    color: '#f59e0b',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'Preparing to Melt',
        content: 'Warmth begins',
        speechSegments: [
          { text: 'Close your eyes and settle into your bed.', pauseAfter: 5 },
          { text: 'Take a slow, deep breath.', pauseAfter: 5, breathCue: true },
          { text: 'Tonight, all tension will melt away.', pauseAfter: 6 },
          { text: 'Like warm butter on a summer day.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'melt-1',
        type: 'timed_speech',
        title: 'Warm Light',
        content: 'The melting begins',
        speechSegments: [
          { text: 'Imagine a warm, golden light above your head.', pauseAfter: 10 },
          { text: 'It glows with soothing warmth.', pauseAfter: 8 },
          { text: 'The light begins to pour down over you.', pauseAfter: 10 },
          { text: 'It touches the top of your head.', pauseAfter: 8 },
          { text: 'Any tension there melts immediately.', pauseAfter: 10 },
          { text: 'Melting. Softening. Releasing.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'melt-2',
        type: 'timed_speech',
        title: 'Down Through Your Body',
        content: 'Warm and relaxed',
        speechSegments: [
          { text: 'The warm light flows down to your face.', pauseAfter: 10 },
          { text: 'Your forehead melts. Your jaw melts.', pauseAfter: 10 },
          { text: 'It continues down to your neck and shoulders.', pauseAfter: 10 },
          { text: 'All the knots and tightness dissolve.', pauseAfter: 10 },
          { text: 'Melting like butter in the sun.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'melt-3',
        type: 'timed_speech',
        title: 'Complete Melting',
        content: 'Every muscle releases',
        speechSegments: [
          { text: 'The warmth spreads down your arms to your fingertips.', pauseAfter: 10 },
          { text: 'Down your back, melting every muscle.', pauseAfter: 10 },
          { text: 'Through your hips and down your legs.', pauseAfter: 10 },
          { text: 'All the way to your toes.', pauseAfter: 10 },
          { text: 'Your entire body is warm, soft, and relaxed.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Melting Into Sleep',
        content: 'Complete peace',
        speechSegments: [
          { text: 'You feel like warm liquid now.', pauseAfter: 12 },
          { text: 'Completely relaxed. Completely at peace.', pauseAfter: 10 },
          { text: 'The warmth holds you gently.', pauseAfter: 12 },
          { text: 'Let yourself melt into sleep.', pauseAfter: 12 },
          { text: 'Sleep peacefully.', pauseAfter: 15 },
          { text: 'Rest well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_CELESTIAL - Moonlight Path (PREMIUM)
  // ============================================
  {
    id: 'sleep-moonlight-path',
    type: 'meditation',
    category: 'sleep_celestial',
    name: 'Moonlight Path',
    description: 'Walk a silver path through the moonlit night',
    duration: 15,
    icon: 'moon-outline',
    color: '#a1a1aa',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'The Moon Rises',
        content: 'Nighttime begins',
        speechSegments: [
          { text: 'Close your eyes and relax.', pauseAfter: 5 },
          { text: 'Breathe slowly and deeply.', pauseAfter: 5, breathCue: true },
          { text: 'Tonight, the moon rises full and bright.', pauseAfter: 6 },
          { text: 'It casts a silver light across the world.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'The Silver Path',
        content: 'A moonlit walk',
        speechSegments: [
          { text: 'You find yourself in a peaceful meadow.', pauseAfter: 10 },
          { text: 'The grass is silver in the moonlight.', pauseAfter: 10 },
          { text: 'A path stretches before you, glowing softly.', pauseAfter: 10 },
          { text: 'The moonlight has turned it to silver.', pauseAfter: 10 },
          { text: 'You begin to walk, your footsteps silent.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'Night Magic',
        content: 'The world transforms',
        speechSegments: [
          { text: 'Everything is different in the moonlight.', pauseAfter: 10 },
          { text: 'Shadows are soft and friendly.', pauseAfter: 10 },
          { text: 'Night flowers bloom, releasing sweet perfume.', pauseAfter: 10 },
          { text: 'Fireflies dance around you like tiny stars.', pauseAfter: 10 },
          { text: 'The world feels magical and safe.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-3',
        type: 'timed_speech',
        title: 'A Place to Rest',
        content: 'Your moonlit bed',
        speechSegments: [
          { text: 'The path leads to a soft clearing.', pauseAfter: 10 },
          { text: 'Silver grass waits to cushion you.', pauseAfter: 10 },
          { text: 'You lie down under the full moon.', pauseAfter: 10 },
          { text: 'Its light washes over you like water.', pauseAfter: 10 },
          { text: 'Calming. Cooling. Peaceful.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Sleeping Under the Moon',
        content: 'Celestial rest',
        speechSegments: [
          { text: 'The moon watches over you.', pauseAfter: 12 },
          { text: 'Ancient and wise. Gentle and kind.', pauseAfter: 10 },
          { text: 'Its silver light lulls you to sleep.', pauseAfter: 12 },
          { text: 'Let the moon carry you to dreams.', pauseAfter: 12 },
          { text: 'Sleep peacefully.', pauseAfter: 15 },
          { text: 'Rest well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_CELESTIAL - Aurora Dreams (PREMIUM)
  // ============================================
  {
    id: 'sleep-aurora-dreams',
    type: 'meditation',
    category: 'sleep_celestial',
    name: 'Aurora Dreams',
    description: 'Fall asleep watching the northern lights dance',
    duration: 18,
    icon: 'color-palette-outline',
    color: '#22d3ee',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'Northern Night',
        content: 'A special sky',
        speechSegments: [
          { text: 'Close your eyes and imagine a cold, clear night.', pauseAfter: 6 },
          { text: 'Take a deep breath of crisp arctic air.', pauseAfter: 6, breathCue: true },
          { text: 'Tonight, the northern lights will dance for you.', pauseAfter: 6 },
          { text: 'One of nature\'s most beautiful displays.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'The Display Begins',
        content: 'Lights appear',
        speechSegments: [
          { text: 'You lie in a cozy sleeping bag on a snow-covered hill.', pauseAfter: 10 },
          { text: 'Above you, the sky is ink-black and full of stars.', pauseAfter: 10 },
          { text: 'Then, a faint green glow appears on the horizon.', pauseAfter: 10 },
          { text: 'It grows brighter, stretching across the sky.', pauseAfter: 10 },
          { text: 'The aurora has begun.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'Dancing Colors',
        content: 'Nature\'s light show',
        speechSegments: [
          { text: 'The lights begin to dance and shimmer.', pauseAfter: 10 },
          { text: 'Curtains of green wave across the sky.', pauseAfter: 10 },
          { text: 'Pink and purple join the dance.', pauseAfter: 10 },
          { text: 'They ripple and flow like silk in the wind.', pauseAfter: 10 },
          { text: 'The movement is hypnotic. Beautiful.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-3',
        type: 'timed_speech',
        title: 'The Sky Alive',
        content: 'Mesmerizing beauty',
        speechSegments: [
          { text: 'The entire sky is alive with color now.', pauseAfter: 10 },
          { text: 'Spirals of light twist and turn.', pauseAfter: 10 },
          { text: 'Bands of green pulse with energy.', pauseAfter: 10 },
          { text: 'You feel connected to something ancient and magical.', pauseAfter: 12 },
          { text: 'The lights seem to dance just for you.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Dreaming in Color',
        content: 'Into the aurora',
        speechSegments: [
          { text: 'The lights continue their silent dance.', pauseAfter: 12 },
          { text: 'Your eyes grow heavy watching them.', pauseAfter: 10 },
          { text: 'The colors swirl gently in your vision.', pauseAfter: 12 },
          { text: 'Let them carry you into colorful dreams.', pauseAfter: 12 },
          { text: 'Sleep peacefully.', pauseAfter: 15 },
          { text: 'Rest well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_CELESTIAL - Stargazing (PREMIUM)
  // ============================================
  {
    id: 'sleep-stargazing',
    type: 'meditation',
    category: 'sleep_celestial',
    name: 'Stargazing',
    description: 'Count the stars until you drift off to sleep',
    duration: 15,
    icon: 'star-outline',
    color: '#1e1b4b',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'A Clear Night',
        content: 'The stars await',
        speechSegments: [
          { text: 'Close your eyes and imagine a perfect night.', pauseAfter: 6 },
          { text: 'Take a slow, peaceful breath.', pauseAfter: 5, breathCue: true },
          { text: 'The sky is crystal clear and filled with stars.', pauseAfter: 6 },
          { text: 'Tonight, you will count them into sleep.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'Your Viewing Spot',
        content: 'Comfortable and peaceful',
        speechSegments: [
          { text: 'You lie on a soft blanket on a gentle hillside.', pauseAfter: 10 },
          { text: 'The grass is cool and fragrant beneath you.', pauseAfter: 10 },
          { text: 'The night is warm enough to be comfortable.', pauseAfter: 10 },
          { text: 'Above you, the universe stretches endlessly.', pauseAfter: 10 },
          { text: 'Millions of stars sparkle in the darkness.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'Counting Stars',
        content: 'One by one',
        speechSegments: [
          { text: 'You begin to count the stars.', pauseAfter: 10 },
          { text: 'One. A bright blue star.', pauseAfter: 8 },
          { text: 'Two. A gentle yellow one.', pauseAfter: 8 },
          { text: 'Three. A tiny white twinkle.', pauseAfter: 8 },
          { text: 'Four. Five. Six.', pauseAfter: 10 },
          { text: 'There are too many to count.', pauseAfter: 10 },
          { text: 'But it doesn\'t matter. Just count what you can.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-3',
        type: 'timed_speech',
        title: 'The Infinite Sky',
        content: 'Wonder and peace',
        speechSegments: [
          { text: 'Seven. Eight. Nine.', pauseAfter: 10 },
          { text: 'The stars seem to multiply the more you look.', pauseAfter: 10 },
          { text: 'Clusters and constellations appear.', pauseAfter: 10 },
          { text: 'The Milky Way glows softly across the sky.', pauseAfter: 12 },
          { text: 'You feel small and peaceful at the same time.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Sleeping Under Stars',
        content: 'Into dreams',
        speechSegments: [
          { text: 'Ten. Eleven. Twelve.', pauseAfter: 12 },
          { text: 'Your eyes grow heavy.', pauseAfter: 10 },
          { text: 'The stars blur into soft points of light.', pauseAfter: 12 },
          { text: 'Let them watch over you as you sleep.', pauseAfter: 12 },
          { text: 'Dream among the stars.', pauseAfter: 15 },
          { text: 'Rest well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },

  // ============================================
  // SLEEP_CELESTIAL - Cosmic Drift (PREMIUM)
  // ============================================
  {
    id: 'sleep-cosmic-drift',
    type: 'meditation',
    category: 'sleep_celestial',
    name: 'Cosmic Drift',
    description: 'Float through the peaceful expanse of space',
    duration: 20,
    icon: 'planet-outline',
    color: '#3730a3',
    isPremium: true,
    steps: [
      {
        id: 'intro',
        type: 'timed_speech',
        title: 'Leaving Earth',
        content: 'Into the cosmos',
        speechSegments: [
          { text: 'Close your eyes and feel yourself becoming weightless.', pauseAfter: 6 },
          { text: 'Take a deep breath and let go of gravity.', pauseAfter: 6, breathCue: true },
          { text: 'Tonight, you will drift through the peaceful void of space.', pauseAfter: 6 },
          { text: 'Safe, warm, and completely at peace.', pauseAfter: 8 },
        ],
        voiceConfig: VOICE_CONFIG.intro,
        required: true,
      },
      {
        id: 'story-1',
        type: 'timed_speech',
        title: 'Weightless',
        content: 'Floating free',
        speechSegments: [
          { text: 'You float gently through the cosmos.', pauseAfter: 10 },
          { text: 'There is no up or down here.', pauseAfter: 10 },
          { text: 'Only infinite, peaceful space.', pauseAfter: 10 },
          { text: 'You feel completely weightless.', pauseAfter: 10 },
          { text: 'Free from the pull of the world.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-2',
        type: 'timed_speech',
        title: 'Passing Wonders',
        content: 'Cosmic beauty',
        speechSegments: [
          { text: 'A beautiful blue planet drifts by in the distance.', pauseAfter: 10 },
          { text: 'You pass through the rings of a great gas giant.', pauseAfter: 10 },
          { text: 'Ice crystals sparkle like diamonds around you.', pauseAfter: 10 },
          { text: 'Distant nebulae glow in soft purples and pinks.', pauseAfter: 12 },
          { text: 'The universe is more beautiful than you imagined.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-3',
        type: 'timed_speech',
        title: 'The Quiet Void',
        content: 'Perfect silence',
        speechSegments: [
          { text: 'Space is perfectly silent.', pauseAfter: 12 },
          { text: 'No sounds. No distractions.', pauseAfter: 10 },
          { text: 'Just the gentle rhythm of your breath.', pauseAfter: 10 },
          { text: 'And the soft beat of your heart.', pauseAfter: 10 },
          { text: 'You drift on, peaceful and content.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'story-4',
        type: 'timed_speech',
        title: 'A Nebula Cradle',
        content: 'Your resting place',
        speechSegments: [
          { text: 'You come to rest in a soft cloud of cosmic dust.', pauseAfter: 10 },
          { text: 'A nebula, glowing with gentle colors.', pauseAfter: 10 },
          { text: 'Pink and purple and gold.', pauseAfter: 10 },
          { text: 'It wraps around you like a warm blanket.', pauseAfter: 10 },
          { text: 'You are cradled by the universe itself.', pauseAfter: 12 },
        ],
        voiceConfig: VOICE_CONFIG.story,
        required: true,
      },
      {
        id: 'drift',
        type: 'timed_speech',
        title: 'Cosmic Sleep',
        content: 'At peace in space',
        speechSegments: [
          { text: 'The nebula pulses gently with light.', pauseAfter: 12 },
          { text: 'A cosmic heartbeat, slow and soothing.', pauseAfter: 10 },
          { text: 'You are one with the universe.', pauseAfter: 12 },
          { text: 'Let yourself drift into cosmic dreams.', pauseAfter: 12 },
          { text: 'Sleep peacefully among the stars.', pauseAfter: 15 },
          { text: 'Rest well.', pauseAfter: 30 },
        ],
        voiceConfig: VOICE_CONFIG.drift,
        required: true,
      },
    ],
  },
];

// Apply audio transformation when USE_AUDIO is enabled
export const SLEEP_STORY_TEMPLATES = withAudioSupport(RAW_SLEEP_STORY_TEMPLATES);
